<!DOCTYPE html>
<html lang="en" class="h-full">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Goat | Intentionally vulnerable cluster environment to learn and practice Kubernetes security.
    </title>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .k8s-blue-bg {
            background-color: #1f6aee
        }

        .list-content a:hover {
            color: #1f6aee;
        }
    </style>
</head>

<body class="h-full flex flex-col">

    <header class="text-gray-700 body-font">
        <div class="container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center">
            <a class="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0">
                <img src="./kubernetes-goat.png" height="100" width="100" alt="Kubernetes Goat Logo">
                <span class="ml-3 text-xl">Kubernetes Goat</span>
            </a>
            <nav class="md:ml-auto flex flex-wrap items-center text-base justify-center">
                <a href="https://github.com/madhuakula/kubernetes-goat" rel="noopener noreferrer"
                    target="_blank"><button
                        class="k8s-blue-bg hover:bg-blue-400 text-white font-bold py-2 m-1 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded">Github
                    </button></a>
                <a href="https://twitter.com/intent/tweet/?text=Kubernetes%20Goat,%20an%20intentionally%20vulnerable%20by%20design%20training%20platform%20to%20learn%20%23Kubernetes%20Security%20by%20%40madhuakula.%20Check%20it%20out%20&url=https://github.com/madhuakula/kubernetes-goat"
                    rel="noopener noreferrer" target="_blank"><button
                        class="k8s-blue-bg hover:bg-blue-400 text-white font-bold py-2 m-1 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded">Tweet
                    </button></a>
            </nav>
        </div>
    </header>




    <section class="text-gray-700 body-font">
        <div class="container px-5 py-12 mx-auto">
            <div class="flex flex-wrap w-full mb-20 flex-col items-center text-center">
                <div class="p-4 items-center text-4xl leading-none lg:rounded-full flex lg:inline-flex" role="alert">
                    <span class="font-semibold mr-2 text-center flex-auto">Kubernetes Goat is designed to be
                        intentionally vulnerable cluster environment to learn and practice Kubernetes security.</span>
                </div>
            </div>

            <div class="grid grid-cols-4 gap-4 -m-4">


                <div class="bg-white shadow my-1">
                    <ul class="list-reset overflow-auto list-items" style="max-height: 500px;">
                        <li>
                            <div id="intro"
                                class="block p-4 text-grey-darker font-bold border-purple hover:bg-grey-lighter border-r-4 cursor-pointer">
                                Introduction</div>
                        </li>
                        <li>
                            <div id="scenario-1"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                Sensitive keys in code bases</div>
                        </li>
                        <li>
                            <div id="scenario-2"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                DIND(docker-in-docker) exploitation</div>
                        </li>
                        <li>
                            <div id="scenario-3"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                SSRF in K8S world</div>
                        </li>
                        <li>
                            <div id="scenario-4"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                Container escape to access host system</div>
                        </li>
                        <li>
                            <div id="scenario-5"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                Docker CIS Benchmarks analysis</div>
                        </li>
                        <li>
                            <div id="scenario-6"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                Kubernetes CIS Benchmarks analysis</div>
                        </li>
                        <li>
                            <div id="scenario-7"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                Attacking private registry</div>
                        </li>
                        <li>
                            <div id="scenario-8"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                NodePort exposed services</div>
                        </li>
                        <li>
                            <div id="scenario-9"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                Helm v2 tiller to PwN the cluster</div>
                        </li>
                        <li>
                            <div id="scenario-10"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                Analysing crypto miner container</div>
                        </li>
                        <li>
                            <div id="scenario-11"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                Kubernetes Namespaces bypass</div>
                        </li>
                        <li>
                            <div id="scenario-12"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                Gaining environment information</div>
                        </li>
                        <li>
                            <div id="scenario-13"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                DoS the memory/cpu resources</div>
                        </li>
                        <li>
                            <div id="scenario-14"
                                class="block p-4 text-grey-darker font-bold border-grey-lighter hover:border-purple-light hover:bg-grey-lighter border-r-4 cursor-pointer">
                                Hacker Container preview</div>
                        </li>
                    </ul>
                </div>

                <div class="flex flex-wrap col-span-3 justify-center list-content px-16">

                    <div class="intro-content">
                        <!-- <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">Introduction</h1> -->

                        <img class="mx-auto" src="./kubernetes-goat.png" height="250" width="250"
                            alt="Kubernetes Goat Logo">

                        <br>
                        <p class="mb-8 leading-relaxed">Welcome to Kubernetes Goat. This is the home for exploring your
                            Kubernetes Goat scenarios, discovery, exploitation, attacks, endpoints, etc.</p>

                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Guide</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">Refer to the Kubernetes Goat
                                guide at <a href="https://madhuakula.com/kubernetes-goat/" rel="noopener noreferrer"
                                    target="_blank">https://madhuakula.com/kubernetes-goat/</a></span>
                        </div>

                    </div>

                    <div class="scenario-1-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">Sensitive
                            keys in code bases</h1>
                        <p class="mb-8 leading-relaxed">
                            Developers tend to commit sensitive information to version control systems. As we are moving
                            towards CI/CD and GitOps systems, we tend to forgot identifying sensitive information in
                            code and commits. Let's see if we can find something cool here!
                        </p>
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">To get started with the
                                scenario, navigate to <a href="http://127.0.0.1:1230" rel="noopener noreferrer"
                                    target="_blank">http://127.0.0.1:1230</a></span>
                        </div>
                    </div>
                    <div class="scenario-2-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">
                            DIND(docker-in-docker) exploitation</h1>
                        <p class="mb-8 leading-relaxed">
                            Most of the CI/CD and pipeline system which use Docker and build containers for you with in
                            the pipeline use something called DIND (docker-in-docker). Here in this scenario, we try to
                            exploit and gain access to host system.
                            <br>
                        </p>
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">To get started with the
                                scenario, navigate to <a href="http://127.0.0.1:1231" rel="noopener noreferrer"
                                    target="_blank">http://127.0.0.1:1231</a> and username is <b>admin</b>
                                and password <b>kubernetesgoat</b></span>
                        </div>
                    </div>
                    <div class="scenario-3-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">SSRF in
                            K8S world</h1>
                        <p class="mb-8 leading-relaxed">
                            SSRF (Server Side Request Forgery) vulnerability became the go-to attack for cloud native
                            environments. Here in this scenario, we will see how we can exploit an application
                            vulnerability like SSRF to gain access to cloud instance metadata as well as internal
                            services metdata information.
                        </p>
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">To get started with the
                                scenario, navigate to <a href="http://127.0.0.1:1232" rel="noopener noreferrer"
                                    target="_blank">http://127.0.0.1:1232</a></span>
                        </div>

                    </div>
                    <div class="scenario-4-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">Container
                            escape to access host system</h1>
                        <p class="mb-8 leading-relaxed">
                            Most of the monitoring, tracing and debugging software require to run with extra privileges
                            and capabilities. Here in this scenario, we will see a pod with extra capabilities and
                            privileges including HostPath allows us to gain access to host system and provide Node level
                            configuration to gain complete cluster compromise.
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">To get started with the
                                scenario, navigate to <a href="http://127.0.0.1:1233" rel="noopener noreferrer"
                                    target="_blank">http://127.0.0.1:1233</a></span>
                        </div>
                        </p>
                    </div>
                    <div class="scenario-5-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">Docker
                            CIS Benchmarks analysis</h1>
                        <p class="mb-8 leading-relaxed">
                            This scenario is mainly to perform the Docker CIS benchmarks analysis on top of Kubernetes
                            nodes to identify the possible security vulnerabilities.
                            <br>
                            <br>
                            To get started with this scenario you can either access the node and perform by following
                            docker bench security or run the following command to deploy docker bench security as a
                            DaemonSet
                        </p>
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">kubectl apply -f
                                scenarios/docker-bench-security/deployment.yaml</span>
                        </div>
                    </div>
                    <div class="scenario-6-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">
                            Kubernetes CIS Benchmarks analysis</h1>
                        <p class="mb-8 leading-relaxed">
                            This scenario is mainly to perform the Kubernetes CIS benchmarks analysis on top of
                            Kubernetes nodes to identify the possible security vulnerabilities.
                            <br>
                            <br>
                            To get started with this scenario you can either access the node and perform by following
                            kube-bench security or run the following command to deploy kube-bench as Kubernetes job
                        </p>
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">kubectl apply -f
                                scenarios/kube-bench-security/node-job.yaml<br><br>kubectl apply -f
                                scenarios/kube-bench-security/master-job.yaml
                            </span>
                        </div>
                    </div>
                    <div class="scenario-7-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">Attacking
                            private registry</h1>
                        <p class="mb-8 leading-relaxed">
                            Container registry is the place where all the container images gets pushed. Most of the time
                            each organization have their own private registry. Also sometimes it ends up misconfigured,
                            public/open. On the other hand, developers assumes that it's internal private registry only
                            and end up storing all the sensitive information inside the container images. Let's see what
                            we can find here.</p>
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">To get started with the
                                scenario, navigate to <a href="http://127.0.0.1:1235" rel="noopener noreferrer"
                                    target="_blank">http://127.0.0.1:1235</a>
                            </span>
                        </div>
                    </div>
                    <div class="scenario-8-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">NodePort
                            exposed services</h1>
                        <p class="mb-8 leading-relaxed">
                            If any of the user has exposed any service with in the Kubernetes cluster with NodePort.
                            This means, if the nodes where the Kubernetes clusters running doesn't have any
                            firewall/network security enabled. We ned seeing some unauthenticated an unauthorized
                            services.
                            <br>
                            <br>
                            To get started with the scenario, run the following command and look for open ports in the
                            Kubernetes Nodes
                        </p>
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">kubectl get nodes -o wide
                            </span>
                        </div>
                        <br>
                        <br>
                        <span class="font-semibold mr-2 text-left flex-auto text-black">
                            When Kubernetes creates a NodePort service, it allocates a port from a range specified in
                            the flags that define your Kubernetes cluster. (By default, these are ports ranging from
                            30000-32767.)
                        </span>
                    </div>
                    <div class="scenario-9-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">Helm v2
                            tiller to PwN the cluster</h1>
                        <p class="mb-8 leading-relaxed">
                            Helm is a package manager for Kubernetes. It's like apt-get for ubuntu. In this scenario, we
                            will see the older version of helm (version 2), tiller service RBAC default setup to gain
                            access to the completed cluster.
                            <br>
                            <br>
                            To get started with the scenario, run the following command
                        </p>

                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">kubectl run --rm
                                --restart=Never -it --image=madhuakula/k8s-goat-helm-tiller -- bash
                            </span>
                        </div>
                    </div>
                    <div class="scenario-10-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">Analysing
                            crypto miner container</h1>
                        <p class="mb-8 leading-relaxed">
                            Crypto mining has became popular with these modern infrastructure. Especially environments
                            like Kubernetes is easy target as you might not event look what exactly the container image
                            built upon and what it is doing with proactive monitoring. Here in this scenario, we will
                            analyse and identify the crypto miner.
                        </p>
                        To get started, identify all the resources/images in the Kubernetes cluster. Including
                        Kubernetes Jobs
                        <br>
                        <br>
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">kubectl get jobs
                            </span>
                        </div>
                    </div>
                    <div class="scenario-11-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">
                            Kubernetes Namespaces bypass</h1>
                        <p class="mb-8 leading-relaxed">
                            By default Kubernetes uses flat networking schema, which means any pod/service with in the
                            cluster can talk to other. The namespaces with in the cluster doesn't have any network
                            security restrictions by default. Anyone in the any namespace can talk to other namespace.
                            We heard that Kubernetes-Goat loves cache. Let's see if we can gain access to other
                            namespaces
                        </p>
                        To get started with the scenario, let's run our awesome hacker-container in default namespace
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">kubectl run -it
                                hacker-container --image=madhuakula/hacker-container -- sh
                            </span>
                        </div>
                    </div>
                    <div class="scenario-12-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">Gaining
                            environment information</h1>
                        <p class="mb-8 leading-relaxed">
                            Each environment in the Kubernetes will have lot of information to share. Some of the key
                            things includes, secrets, apikeys, configs, services, many other. So let's go ahead and find
                            the vault key!
                        </p>
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">To get started with the
                                scenario, navigate to <a href="http://127.0.0.1:1233" rel="noopener noreferrer"
                                    target="_blank">http://127.0.0.1:1233</a>
                            </span>
                        </div>
                    </div>
                    <div class="scenario-13-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">DoS the
                            memory/cpu resources</h1>
                        <p class="mb-8 leading-relaxed">
                            Whe there is no specification of resources in the Kubernetes manifests and not applied limit
                            ranges for the containers. As an attacker we can consume all the resources where the
                            pod/deployment running and starve other resources and cause a DoS for the environment.
                        </p>
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">To get started with the
                                scenario, navigate to <a href="http://127.0.0.1:1236" rel="noopener noreferrer"
                                    target="_blank">http://127.0.0.1:1236</a>
                            </span>
                        </div>
                    </div>
                    <div class="scenario-14-content hidden">
                        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900 text-center">Hacker
                            Container preview</h1>
                        <p class="mb-8 leading-relaxed">
                            This scenario, is just an exploration of the common security utilities inside the Kubernetes
                            Cluster environment. I think by this time you might have already used hacker-container
                            multiple times.
                        </p>
                        To get started with this scenario. Run the hacker container using the below command
                        <br>
                        <br>
                        <div class="border-b-4 py-4 lg:px-4 p-2 bg-white items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex"
                            role="alert">
                            <span
                                class="flex rounded-full k8s-blue-bg uppercase px-2 py-1 text-xs font-bold mr-3">Scenario</span>
                            <span class="font-semibold mr-2 text-left flex-auto text-black">kubectl run -it
                                hacker-container --image=madhuakula/hacker-container -- sh
                            </span>
                        </div>
                    </div>
                </div>

            </div>


        </div>
    </section>


    <footer class="text-gray-700 body-font mt-auto">
        <div class="container px-5 py-2 mx-auto flex justify-center sm:flex-row flex-col">
            <p class="text-sm text-gray-500 sm:ml-4 sm:pl-4 sm:py-2 sm:mt-0 mt-4">Â© Kubernetes Goat -
                <a href="https://madhuakula.com" class="text-gray-600 ml-1" rel="noopener noreferrer"
                    target="_blank">Madhu Akula</a>
            </p>
        </div>
    </footer>

    <script>
        const contentElements = document.querySelectorAll('.list-content > div')
        document.querySelectorAll('.list-items div').forEach(
            listItem => listItem.addEventListener('click', () => {
                const id = listItem.getAttribute('id')
                contentElements.forEach(contentElement => {
                    if (contentElement.classList.contains(`${id}-content`)) {
                        contentElement.classList.remove('hidden');
                        return;
                    }
                    contentElement.classList.add('hidden');
                })
            })
        )
    </script>

</body>

</html>